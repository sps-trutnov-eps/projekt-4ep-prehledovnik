<!DOCTYPE html>
<%- include('../partials/head.ejs'); %>

<style>
   body {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
   }

   .header {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-radius: 8px;
      position: fixed;
      top: 0;
      left: 0;
   }

   .navbar {
      display: flex;
      justify-content: flex-start;
      padding: 10px;
      width: 100%;
      box-sizing: border-box;
   }

   .navbar button {
      margin-right: 10px;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
   }

   .levy_panel {
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      border-radius: 8px;
   }

   .levy_panel button {
      width: 100%;
      padding: 15px;
      font-size: 18px;
      margin-bottom: 20px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
   }

   .main-content {
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
   }

   .main-heading {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 20px;
      text-align: center;
   }

   .divider {
      width: 100%;
      height: 2px;
      margin-bottom: 20px;
   }

   .phase {
      font-size: 36px;
      font-weight: bold;
      margin-bottom: 20px;
      text-align: center;
   }

   table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
   }

   th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
      font-size: 16px;
   }

   .table-button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: none;
   }

   .project-button {
      margin-right: 10px;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      background-color: #007BFF;
      color: white;
      transition: background-color 0.3s;
   }

   .project-button:hover {
      background-color: #0056b3;
   }
</style>
<link rel="stylesheet" href="/osnovy/css/main.css" />


<article class="levy_panel" style="width: 20vw; min-width: 20vw; margin-right: 1em; overflow-y: auto; resize: horizontal;">
    <button>Přepínač</button>
    <a href="/projekty/">
      <button>Fáze</button>
    </a>
    <a href="/projekty/vytvoreniProjektu">
      <button>Vytvoření projektu</button>
    </a>
    <%- tlacitka %>
</article>

<article class="main-content" style="flex: 3; overflow-y: auto">
   <h1 class="main-heading">Hlavní týmy</h1>
   <div class="divider"></div>

   <table>
      <tr>
         <th>Týmy</th>
      </tr>
      <% tymy.forEach((tym, index) => { %>
         <tr>
            <td>
               <button onclick="showTeamInfo('Tým <%= index + 1 %>', this)">Tým <%= index + 1 %></button>
               <div class="team-info-section"></div>
            </td>
         </tr>
      <% }); %>
   </table>
</article>

<script>
   function showTeamInfo(team, buttonElement) {
      const teamInfo = {
         'Tým 1': 'Informace o Týmu 1...',
         'Tým 2': 'Informace o Týmu 2...',
         'Tým 3': 'Informace o Týmu 3...',
         'Tým 4': 'Informace o Týmu 4...'
      };

      const parentTd = buttonElement.closest('td');
      const teamInfoSection = parentTd.querySelector('.team-info-section');
      teamInfoSection.innerHTML = `
         <div id="team-info">${teamInfo[team]}</div>
         <div id="additional-buttons">
         <button class="detail-button" onclick="showDetail('Detail týmu', this)">Detail týmu</button>
         <button class="detail-button" onclick="showDetail('Pitch', this)">Pitch</button>
         <button class="detail-button" onclick="showDetail('Prezentace', this)">Prezentace</button>
         </div>
         <div id="detail-info"></div>
      `;

      teamInfoSection.style.display = 'block';
   }

   function showDetail(detailType, buttonElement) {
      const detailInfo = {
         'Detail týmu': `
            <form action="/projekty/ulozitDetailyTymu" method="POST">
               <div class="input-container">
                  <label for="team-leader">Jméno vedoucího:</label>
                  <input type="text" id="team-leader" name="leader" maxlength="50" placeholder="Zadejte jméno vedoucího" required>
               </div>
               <div class="input-container">
                  <label for="team-members">Členové týmu:</label>
                  <input type="text" id="team-members" name="members" maxlength="50" placeholder="Zadejte členy týmu" required>
               </div>
               <button type="submit" class="save-button">Uložit Detaily Týmu</button>
            </form>
         `,
         'Pitch': `
            <div class="pitch-container">
               <div class="input-container">
                  <label for="feature-1">Featura 1:</label>
                  <input type="text" id="feature-1" placeholder="Zadejte první featuru">
               </div>
               <div class="input-container">
                  <label for="feature-2">Featura 2:</label>
                  <input type="text" id="feature-2" placeholder="Zadejte druhou featuru">
               </div>
               <div class="input-container">
                  <label for="feature-3">Featura 3:</label>
                  <input type="text" id="feature-3" placeholder="Zadejte třetí featuru">
               </div>
               <div class="input-container">
                  <label for="goal-1">Cíl 1:</label>
                  <input type="text" id="goal-1" placeholder="Zadejte první cíl">
               </div>
               <div class="input-container">
                  <label for="goal-2">Cíl 2:</label>
                  <input type="text" id="goal-2" placeholder="Zadejte druhý cíl">
               </div>
               <div class="input-container">
                  <label for="bonus">Bonus:</label>
                  <input type="text" id="bonus" placeholder="Zadejte bonus">
               </div>
               <button class="save-button" onclick="savePitch()">Uložit Pitch</button>
            </div>
         `,
         'Prezentace': `
            <div class="presentation-container">
               <!-- Formulář pro prezentaci -->
               <div class="input-container">
                  <label for="feature-1">Featura 1:</label>
                  <input type="text" id="feature-1" placeholder="Zadejte první featuru">
                  <input type="range" id="feature-1-range" min="0" max="100" value="0">
                  <span id="feature-1-percentage">0%</span>
               </div>
               <div class="input-container">
                  <label for="feature-2">Featura 2:</label>
                  <input type="text" id="feature-2" placeholder="Zadejte druhou featuru">
                  <input type="range" id="feature-2-range" min="0" max="100" value="0">
                  <span id="feature-2-percentage">0%</span>
               </div>
               <div class="input-container">
                  <label for="feature-3">Featura 3:</label>
                  <input type="text" id="feature-3" placeholder="Zadejte třetí featuru">
                  <input type="range" id="feature-3-range" min="0" max="100" value="0">
                  <span id="feature-3-percentage">0%</span>
               </div>
               <div class="input-container">
                  <label for="goal-1">Cíl 1:</label>
                  <input type="text" id="goal-1" placeholder="Zadejte první cíl">
                  <input type="range" id="goal-1-range" min="0" max="100" value="0">
                  <span id="goal-1-percentage">0%</span>
               </div>
               <div class="input-container">
                  <label for="goal-2">Cíl 2:</label>
                  <input type="text" id="goal-2" placeholder="Zadejte druhý cíl">
                  <input type="range" id="goal-2-range" min="0" max="100" value="0">
                  <span id="goal-2-percentage">0%</span>
               </div>
               <div class="input-container">
                  <label for="bonus">Bonus:</label>
                  <input type="text" id="bonus" placeholder="Zadejte bonus">
                  <input type="range" id="bonus-range" min="0" max="100" value="0">
                  <span id="bonus-percentage">0%</span>
               </div>
               <button class="save-button" onclick="savePresentation()">Uložit Prezentaci</button>
            </div>
         `
      };

      const parentTd = buttonElement.closest('td');
      const detailInfoDiv = parentTd.querySelector('#detail-info');
      detailInfoDiv.innerHTML = detailInfo[detailType];

      // Přidáme posluchače pro posuvníky v prezentaci
      if (detailType === 'Prezentace') {
         document.querySelectorAll('.input-container input[type="range"]').forEach((rangeInput) => {
            rangeInput.addEventListener('input', function() {
               const percentageSpan = this.nextElementSibling;
               percentageSpan.textContent = `${this.value}%`;
            });
         });
      }
   }

   function savePitch() {
      alert('Pitch byl uložen!');
   }

   function savePresentation() {
      alert('Prezentace byla uložena!');
   }

   function saveTeamDetails() {
      alert('Detaily týmu byly uloženy!');
   }
</script>